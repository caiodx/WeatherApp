"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[211],{3211:(S,u,r)=>{r.r(u),r.d(u,{HomePage:()=>C});var l=r(467),i=r(1680),e=r(3953),v=r(8880),m=r(6413);let p=(()=>{var n;class s{constructor(t){this.geolocation=t}GetPosition(){var t=this;return(0,l.A)(function*(){return yield t.geolocation.getCurrentPosition()})()}}return(n=s).\u0275fac=function(t){return new(t||n)(e.KVO(m.L))},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),s})();var g=r(5312);let f=(()=>{var n;class s{constructor(){this.API_KEY="",this.WEATHER_ENDPOINT="https://api.openweathermap.org/data/2.5/weather",this.UNITS="metric",this.API_KEY=g.c.openweather.apikey,this.WEATHER_ENDPOINT=g.c.openweather.endpoint}GetWeatherByCoord(t,o){var a=this;return(0,l.A)(function*(){const c=`${a.WEATHER_ENDPOINT}?lat=${t}&lon=${o}&appid=${a.API_KEY}&units=${a.UNITS}`,h=yield fetch(c);if(h.ok)return yield h.json();throw new Error("Falha ao buscar dados do clima.")})()}GetWeatherByCity(t){var o=this;return(0,l.A)(function*(){const a=`${o.WEATHER_ENDPOINT}?q=${t}&appid=${o.API_KEY}&units=${o.UNITS}`,c=yield fetch(a);if(c.ok)return yield c.json();throw new Error("Falha ao buscar dados do clima.")})()}}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),s})();var P=r(70),y=r(4582);let C=(()=>{var n;class s{constructor(t,o,a,c,h){this.platform=t,this.geoLocationService=o,this.weatherService=a,this.router=c,this.globalConfigService=h,this.geoLocationPosition=void 0,this.cityName="Lisbon",this.countryCode="PT",this.weatherConditionCode="01d",this.weatherConditionDescription="Sun",this.platform.ready().then(()=>{console.log("device ready!")})}ionViewWillEnter(){var t=this;return(0,l.A)(function*(){t.LoadSettings()})()}LoadSettings(){var t=this;return(0,l.A)(function*(){let c,o=t.globalConfigService.getGlobalSetting("localizacaoSelecionada"),a=t.globalConfigService.getGlobalSetting("nomeCidade");"pegarLocalizacaoAtual"===o||null==o||null==o?(t.geoLocationPosition=yield t.geoLocationService.GetPosition(),c=yield t.weatherService.GetWeatherByCoord(t.geoLocationPosition.coords.latitude,t.geoLocationPosition.coords.longitude)):c=yield t.weatherService.GetWeatherByCity(a),t.LoadWeather(c)})()}LoadWeather(t){var o,a;this.cityName=t.name,this.weatherConditionDescription=null===(o=t.weather[0])||void 0===o?void 0:o.description,this.weatherConditionCode=null===(a=t.weather[0])||void 0===a?void 0:a.icon,this.countryCode=t.sys.country,this.weatherDegrees=Math.floor(t.main.temp)}GetGeoPosition(){var t=this;return(0,l.A)(function*(){t.geoLocationPosition=yield t.geoLocationService.GetPosition()})()}GotoPage(t){this.router.navigateByUrl(`/${t}`)}}return(n=s).\u0275fac=function(t){return new(t||n)(e.rXU(v.OD),e.rXU(p),e.rXU(f),e.rXU(P.Ix),e.rXU(y.B))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-home"]],standalone:!0,features:[e.aNF],decls:28,vars:8,consts:[["contentId","main-content"],[1,"ion-padding"],[3,"click"],["id","main-content",1,"ion-page"],[3,"translucent"],["slot","start"],[3,"fullscreen"],["id","container"],[3,"src"]],template:function(t,o){1&t&&(e.j41(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),e.EFF(4,"Menu"),e.k0s()()(),e.j41(5,"ion-content",1)(6,"ion-item",2),e.bIt("click",function(){return o.GotoPage("config")}),e.j41(7,"ion-label"),e.EFF(8,"Configura\xe7\xf5es"),e.k0s()()()(),e.j41(9,"div",3)(10,"ion-header",4)(11,"ion-toolbar")(12,"ion-buttons",5),e.nrm(13,"ion-menu-button"),e.k0s(),e.j41(14,"ion-title"),e.EFF(15," Weather App "),e.k0s()()(),e.j41(16,"ion-content",6)(17,"div",7)(18,"ion-card")(19,"ion-card-header")(20,"ion-card-title"),e.EFF(21),e.k0s()(),e.j41(22,"ion-card-content")(23,"ion-item")(24,"ion-thumbnail"),e.nrm(25,"ion-img",8),e.k0s(),e.j41(26,"ion-label"),e.EFF(27),e.k0s()()()()()()()),2&t&&(e.R7$(10),e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(5),e.Lme("",o.cityName," - ",o.countryCode,""),e.R7$(4),e.Mz_("src","https://openweathermap.org/img/wn/",o.weatherConditionCode,"@2x.png"),e.R7$(2),e.Lme("",o.weatherDegrees,"\xb0 - ",o.weatherConditionDescription,""))},dependencies:[i.eU,i.ai,i.BC,i.W9,i.b_,i.ME,i.tN,i.I9,i.KW,i.Zx,i.he,i.uz,i.QW,i.MC,i.oS],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-item[_ngcontent-%COMP%]{--background: none;--color: none}"]}),s})()}}]);